<!DOCTYPE html>
<html>
<head>
	<title></title>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.4/jquery-ui.min.js"></script>


	   <script type="text/javascript">
        $(document).ready(function() {

        	var lastSuccess = -1;
        	for (var idx = 0; idx < 30; idx ++) {
        		$.ajax({ 
        				async: false,
					    url:'https://sorinslavic.github.io/curte-spate-slider/spate-'+idx+'.jpeg',
					    type:'GET',
					    error: function() {
					    	idx=100;
					    },
					    success: function() {
		    	        	$('#imgContainer').prepend($('<img>', {id:'img'+idx, src:'spate-'+idx+'.jpeg'}));
		    	        	if (idx > lastSuccess) {
  		    	        		lastSuccess=idx;
  		    	        	}
					    }
					});
        	}
        	$('#slider').val(0);
        	$('#slider').attr('max', (lastSuccess+1)*10);

            //Step 1: set up the slider with some options. The valid values for opacity are 0 to 1
            //Step 2: Bind an event so when you slide the slider and stop, the following function gets called
            $('#slider').bind('input', function() {
            	var slx = parseInt($('#slider').val());
            	var idx = parseInt(slx/10, 10);

            	for (var i = 0; i <= lastSuccess; i ++) {
            		$('#img' + i).css('opacity', 0);
            	}
            	
	            $('#img' + (idx-1)).css('opacity', 1-((slx%10))/10);
    	        $('#img' + idx).css('opacity', (slx%10)/10);

            	$('#sliderx').val(idx);
            });


        });
    </script>

    <style type="text/css">
        #slider { width: 500px; left: 10px;}

        img {position: absolute;  left: 20px;  top: 20px;  width: 900px; height: 450px; border: 1px solid black;}
    </style>

</head>
<body>

	<div id="imgContainer" style="height: 500px">

	</div>
	<div>
	  <input type="range" id="slider" name="slider" min="10" max="120" value="0">
	  <input type="text" id="sliderx" value=1>

	</div>

</body>
</html>
